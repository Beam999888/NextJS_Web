import { NextRequest, NextResponse } from 'next/server';

export const runtime = 'nodejs';

const MAPPING: Record<string, string[]> = {
    'กระบี่': ['อำเภอเมืองกระบี่','อำเภอเขาพนม','อำเภอคลองท่อม','อำเภออ่าวลึก','อำเภอปลายพระยา','อำเภอลำทับ','อำเภอเหนือคลอง'],
    'กรุงเทพมหานคร': ['เขตพระนคร','เขตดุสิต','เขตหนองจอก','เขตบางรัก','เขตบางเขน','เขตบางกะปิ','เขตปทุมวัน','เขตป้อมปราบศัตรูพ่าย','เขตพระโขนง','เขตมีนบุรี'],
    'เชียงใหม่': ['อำเภอเมืองเชียงใหม่','อำเภอสันทราย','อำเภอหางดง','อำเภอสันกำแพง','อำเภอแม่ริม'],
    'ชลบุรี': ['อำเภอเมืองชลบุรี','อำเภอบางละมุง','อำเภอศรีราชา','อำเภอพานทอง','อำเภอบ้านบึง'],
    'ขอนแก่น': ['อำเภอเมืองขอนแก่น','อำเภอน้ำพอง','อำเภอพล','อำเภอชุมแพ','อำเภอพระยืน'],
    'นครราชสีมา': ['อำเภอเมืองนครราชสีมา','อำเภอปากช่อง','อำเภอสูงเนิน','อำเภอโชคชัย','อำเภอพิมาย'],
    'ภูเก็ต': ['อำเภอเมืองภูเก็ต','อำเภอกะทู้','อำเภอถลาง'],
    'นนทบุรี': ['อำเภอเมืองนนทบุรี','อำเภอบางบัวทอง','อำเภอบางใหญ่','อำเภอปากเกร็ด','อำเภอบางกรวย'],
    'ปทุมธานี': ['อำเภอเมืองปทุมธานี','อำเภอคลองหลวง','อำเภอลำลูกกา','อำเภอธัญบุรี','อำเภอสามโคก'],
    'นครปฐม': ['อำเภอเมืองนครปฐม','อำเภอกำแพงแสน','อำเภอบางเลน','อำเภอสามพราน','อำเภอนครชัยศรี'],
};

export async function GET(req: NextRequest) {
    const province = req.nextUrl.searchParams.get('province') || '';
    const list = MAPPING[province] || [];
    return NextResponse.json(list.sort((a, b) => a.localeCompare(b, 'th')));
}

